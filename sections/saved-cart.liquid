<link rel="stylesheet" href="{{ 'cart-items.css' | asset_url }}">

{%- if cart != empty -%}
  <link
    rel="stylesheet"
    id="cart-summary-css"
    href="{{ 'cart-summary.css' | asset_url }}">
{%- endif -%}

<div class="container">
  {% if cart != empty %}
    <div class="custom-cart-header">
      <div class="custom-cart-header-left">
        <p class="custom-cart-header-title">Saved Carts</p>
        <span class="custom-cart-header-select">Select All</span>
      </div>
      <div class="custom-cart-header-right">
        <a href="#">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none">
            <path d="M7 5C6.46957 5 5.96086 5.21071 5.58579 5.58579C5.21071 5.96086 5 6.46957 5 7V9C5 9.53043 5.21071 10.0391 5.58579 10.4142C5.96086 10.7893 6.46957 11 7 11H9C9.53043 11 10.0391 10.7893 10.4142 10.4142C10.7893 10.0391 11 9.53043 11 9V7C11 6.46957 10.7893 5.96086 10.4142 5.58579C10.0391 5.21071 9.53043 5 9 5H7ZM7 13C6.46957 13 5.96086 13.2107 5.58579 13.5858C5.21071 13.9609 5 14.4696 5 15V17C5 17.5304 5.21071 18.0391 5.58579 18.4142C5.96086 18.7893 6.46957 19 7 19H9C9.53043 19 10.0391 18.7893 10.4142 18.4142C10.7893 18.0391 11 17.5304 11 17V15C11 14.4696 10.7893 13.9609 10.4142 13.5858C10.0391 13.2107 9.53043 13 9 13H7ZM13 7C13 6.46957 13.2107 5.96086 13.5858 5.58579C13.9609 5.21071 14.4696 5 15 5H17C17.5304 5 18.0391 5.21071 18.4142 5.58579C18.7893 5.96086 19 6.46957 19 7V9C19 9.53043 18.7893 10.0391 18.4142 10.4142C18.0391 10.7893 17.5304 11 17 11H15C14.4696 11 13.9609 10.7893 13.5858 10.4142C13.2107 10.0391 13 9.53043 13 9V7ZM13 15C13 14.4696 13.2107 13.9609 13.5858 13.5858C13.9609 13.2107 14.4696 13 15 13H17C17.5304 13 18.0391 13.2107 18.4142 13.5858C18.7893 13.9609 19 14.4696 19 15V17C19 17.5304 18.7893 18.0391 18.4142 18.4142C18.0391 18.7893 17.5304 19 17 19H15C14.4696 19 13.9609 18.7893 13.5858 18.4142C13.2107 18.0391 13 17.5304 13 17V15Z" fill="#252C32" />
          </svg>
        </a>
        <a href="#">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M5 6C5 5.73478 5.10536 5.48043 5.29289 5.29289C5.48043 5.10536 5.73478 5 6 5H18C18.2652 5 18.5196 5.10536 18.7071 5.29289C18.8946 5.48043 19 5.73478 19 6C19 6.26522 18.8946 6.51957 18.7071 6.70711C18.5196 6.89464 18.2652 7 18 7H6C5.73478 7 5.48043 6.89464 5.29289 6.70711C5.10536 6.51957 5 6.26522 5 6ZM5 10C5 9.73478 5.10536 9.48043 5.29289 9.29289C5.48043 9.10536 5.73478 9 6 9H18C18.2652 9 18.5196 9.10536 18.7071 9.29289C18.8946 9.48043 19 9.73478 19 10C19 10.2652 18.8946 10.5196 18.7071 10.7071C18.5196 10.8946 18.2652 11 18 11H6C5.73478 11 5.48043 10.8946 5.29289 10.7071C5.10536 10.5196 5 10.2652 5 10ZM5 14C5 13.7348 5.10536 13.4804 5.29289 13.2929C5.48043 13.1054 5.73478 13 6 13H18C18.2652 13 18.5196 13.1054 18.7071 13.2929C18.8946 13.4804 19 13.7348 19 14C19 14.2652 18.8946 14.5196 18.7071 14.7071C18.5196 14.8946 18.2652 15 18 15H6C5.73478 15 5.48043 14.8946 5.29289 14.7071C5.10536 14.5196 5 14.2652 5 14ZM5 18C5 17.7348 5.10536 17.4804 5.29289 17.2929C5.48043 17.1054 5.73478 17 6 17H18C18.2652 17 18.5196 17.1054 18.7071 17.2929C18.8946 17.4804 19 17.7348 19 18C19 18.2652 18.8946 18.5196 18.7071 18.7071C18.5196 18.8946 18.2652 19 18 19H6C5.73478 19 5.48043 18.8946 5.29289 18.7071C5.10536 18.5196 5 18.2652 5 18Z"
              fill="#B0BABF" />
          </svg>
        </a>
      </div>
    </div>
  {% endif %}
  <form
    id="cart"
    action="{{ routes.cart_url }}"
    method="post">
    <div class="cart__items custom-cart-items-container">
      <!--
      {%- if section.settings.show_page_title -%}
      <h1 class="h2 mb-10{% if cart != empty %} {{ section.settings.heading_align }}{% else %} text-center{% endif %} js-cart-title"></h1>
      {%- endif -%}

      {%- if settings.show_free_shipping_notice and cart != empty -%}
      {% render 'free-shipping-notice' %}
      {%- endif -%}

      <div
      class="alert mt-6 mb-6 bg-error-bg text-error-text"
      id="cart-errors"
      role="alert"
      hidden></div>
      -->
      {% render 'cart-custom-items' %}
      <!--
      {%- if settings.show_recommendations and cart != empty -%}
      <div class="cart-page-recommendations mt-8">
      {%- liquid
      if settings.recommendations_layout == 'carousel'
      assign grid_classes = 'grid grid-flow-col auto-cols-1 md:auto-cols-2 gap-x-theme'
      else
      assign grid_classes = 'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 xl:grid-cols-2 gap-x-theme'
      endif
      -%}
      {%- render 'recommendations'
      , is_cart: true,
      products_to_show: settings.recommendations_to_show,
      heading: settings.recommendations_heading,
      layout: settings.recommendations_layout,
      grid_classes: grid_classes,
      always_open_quickbuy: true -%}
      </div>
      {%- endif -%}

      {%- if section.settings.show_shipping_calculator and cart != empty -%}
      <div class="cart__shipping-calculator panel mt-8">
      {% render 'shipping-calculator'
      , id: 'cart',
      default_country: section.settings.shipping_calculator_default_country %}
      </div>
      {%- endif -%}
      </div>
      -->

      {%- if cart != empty -%}
        <div
          hidden
          class="cart__summary p-6 md:p-8"
          id="cart-summary"
          data-section="{{ section.id }}">
          {%- if cart != empty -%}
            <h2 class="h5">{{ 'cart.summary.title' | t }}</h2>

            {%- if section.settings.show_order_note -%}
              <script src="{{ 'cart-note.js' | asset_url }}" defer="defer"></script>

              <details-disclosure class="block mt-6">
                <details class="cart-note-disclosure disclosure disclosure--row">
                  <summary>
                    <div class="flex justify-between items-center">
                      <span class="js-show-note">
                        {%- if cart.note == blank -%}
                          {{- 'cart.note.add' | t -}}
                        {%- else -%}
                          {{- 'cart.note.edit' | t -}}
                        {%- endif -%}
                      </span>
                      <span class="disclosure__toggle">
                        {%- if settings.disclosure_toggle == 'plus' -%}
                          {% render 'icon-plus' %}
                        {%- else -%}
                          {% render 'icon-chevron-down' %}
                        {%- endif -%}
                      </span>
                    </div>
                  </summary>
                  <div class="disclosure__panel">
                    <div class="disclosure__content">
                      <cart-note>
                        <label class="visually-hidden" for="cart-note">{{ 'cart.note.label' | t }}</label>
                        <textarea
                          class="input w-full"
                          id="cart-note"
                          name="note"
                          rows="4">{{ cart.note }}</textarea>
                      </cart-note>
                    </div>
                  </div>
                </details>
              </details-disclosure>
            {%- endif -%}

            {%- if section.settings.show_tax_and_shipping -%}
              <div class="mt-6 rte">
                {%- if cart.taxes_included and shop.shipping_policy.body != blank -%}
                  {{- 'cart.general.taxes_included_shipping_at_checkout_html' | t: link: shop.shipping_policy.url -}}
                {%- elsif cart.taxes_included -%}
                  {{- 'cart.general.taxes_included_shipping_at_checkout' | t -}}
                {%- elsif shop.shipping_policy.body != blank -%}
                  {{- 'cart.general.taxes_and_shipping_at_checkout_html' | t: link: shop.shipping_policy.url -}}
                {%- else -%}
                  {{- 'cart.general.taxes_and_shipping_at_checkout' | t -}}
                {%- endif -%}
              </div>
            {%- endif -%}

            {%- if cart.cart_level_discount_applications.size > 0 -%}
              <ul
                class="mt-3 mb-2 font-bold"
                aria-label="{{ 'customer.order.discount' | t }}"
                role="list">
                {%- for discount in cart.cart_level_discount_applications -%}
                  <li class="mt-2">
                    <div class="discount text-sm inline-flex items-center">
                      {% render 'icon-tags' %} {{ discount.title | escape_once }} (-{{ discount.total_allocated_amount | money }})
                    </div>
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}

            <div class="flex justify-between items-center mt-6">
              <h3
                class="mb-0 h6">{{ 'cart.summary.subtotal' | t }}:</h3>
              <p class="mb-0 h6">{{ cart.total_price | money_with_currency }}</p>
            </div>

            {%- if section.settings.cart_terms_page != blank -%}
              <cart-terms class="block mt-6">
                <input
                  type="checkbox"
                  class="checkbox"
                  id="cart-terms">
                <label for="cart-terms">
                  <span class="rte">{{ 'cart.terms.agreement_html' | t: terms_url: section.settings.cart_terms_page }}</span>
                </label>
              </cart-terms>
            {%- endif -%}

            <div class="mt-6">
              <button class="btn btn--primary btn--icon-with-text w-full" name="checkout">
                {%- if settings.cart_icon == 'bag' -%}
                  {%- render 'icon-bag' -%}
                {%- elsif settings.cart_icon == 'basket' -%}
                  {%- render 'icon-basket' -%}
                {%- else -%}
                  {%- render 'icon-cart' -%}
                {%- endif -%}
                {{- 'cart.summary.checkout' | t -}}
              </button>
            </div>
            {%- if additional_checkout_buttons and section.settings.cart_terms_page == blank and section.settings.show_additional_checkout_buttons -%}
              <div class="dynamic-cart-btns">
                {{ content_for_additional_checkout_buttons }}
              </div>
            {%- endif -%}

            {%- if section.settings.continue_shopping_page != blank -%}
              <a href="{{ section.settings.continue_shopping_page.url }}" class="link block text-center w-full mt-6">
                {{ 'cart.summary.continue_shopping' | t }}
              </a>
            {%- endif -%}

          {%- endif -%}
        </div>
      {%- endif -%}
    </div>
    {% if cart != empty %}
      <div class="custom-cart-footer">
        <button class="btn btn--primary custom-clear-all">
          Clear All
        </button>

        <button
          type="submit"
          class="btn btn--primary btn--icon-with-text w-full custom-cart-checkout"
          name="checkout">
          Proceed to Checkout
        </button>

      </div>
    {% endif %}
  </form>

</div>


{%- if section.settings.cart_terms_page != blank -%}
  <script>
    class CartTerms extends HTMLElement {
      constructor() {
        super();
        document.getElementById('cart').addEventListener('submit', (evt) => {
          if (!document.getElementById('cart-terms').checked) {
            evt.preventDefault();
            alert(`{{ 'cart.terms.confirmation' | t }}`);
          }
        });
      }
    }
    customElements.define('cart-terms', CartTerms);
  </script>
{%- endif -%}

{% schema %}
  {
    "name": "Saved Cart",
    "class": "cc-main-cart section section--template",
    "settings": [
      {
        "type": "header",
        "content": "Heading"
      },
      {
        "type": "checkbox",
        "id": "show_page_title",
        "label": "Show the default page heading",
        "info": "If hidden, you should provide a primary page heading (h1 tag) in another section with h1 capability (e.g. image banner, slideshow or background video) for SEO purposes.",
        "default": true
      },
      {
        "type": "select",
        "id": "heading_align",
        "label": "Heading alignment",
        "options": [
          {
            "value": "text-start",
            "label": "Left"
          }, {
            "value": "text-center",
            "label": "Center"
          }, {
            "value": "text-end",
            "label": "Right"
          }
        ],
        "default": "text-start"
      },
      {
        "type": "header",
        "content": "Cart items"
      }, {
        "type": "checkbox",
        "id": "show_backorder_text",
        "label": "Show backorder text",
        "default": true,
        "info": "Only shows for products which use Shopify inventory tracking and can be purchased when out of stock."
      }, {
        "type": "checkbox",
        "id": "show_vendor",
        "label": "Show vendor",
        "default": true
      }, {
        "type": "header",
        "content": "Order summary"
      }, {
        "type": "checkbox",
        "id": "show_order_note",
        "label": "Show order note",
        "default": true
      }, {
        "type": "checkbox",
        "id": "show_tax_and_shipping",
        "label": "Show tax status and shipping policy link",
        "default": true
      }, {
        "type": "checkbox",
        "id": "show_additional_checkout_buttons",
        "label": "Show additional checkout options",
        "default": true,
        "info": "Display other gateways and quick checkout buttons. [Learn more](https://help.shopify.com/en/manual/payments/accelerated-checkouts)"
      }, {
        "type": "url",
        "id": "cart_terms_page",
        "label": "Terms and conditions link",
        "info": "Additional checkout options will be hidden when cart terms are shown."
      }, {
        "type": "url",
        "id": "continue_shopping_page",
        "label": "Continue shopping link"
      }, {
        "type": "header",
        "content": "Shipping calculator"
      }, {
        "type": "checkbox",
        "id": "show_shipping_calculator",
        "label": "Show shipping calculator",
        "default": false
      }, {
        "type": "text",
        "id": "shipping_calculator_default_country",
        "label": "Default country",
        "info": "If the customer is logged-in, their default shipping address details will be selected.",
        "default": "United States"
      }
    ],
    "presets": [
        {
          "name": "Saved Cart"
        }
    ]
  }
{% endschema %}